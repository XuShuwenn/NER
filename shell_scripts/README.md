# è®­ç»ƒè„šæœ¬è¯´æ˜

æœ¬é¡¹ç›®æä¾›äº†4ä¸ªä¸“é—¨çš„è®­ç»ƒè„šæœ¬ï¼Œåˆ†åˆ«ç”¨äºä¸åŒæ¨¡å‹å’Œè¯­è¨€çš„NERè®­ç»ƒã€‚æ‰€æœ‰è„šæœ¬éƒ½åŸºäºå®é™…å®éªŒéªŒè¯ï¼ŒåŒ…å«ä¼˜åŒ–çš„è¶…å‚æ•°é…ç½®ã€‚

## ğŸ“ è„šæœ¬æ–‡ä»¶

| è„šæœ¬åç§° | æ¨¡å‹ç±»å‹ | è¯­è¨€ | æ•°æ®é›† | ç”¨é€” |
|---------|---------|------|--------|------|
| `run_bert_en.sh` | BERT | è‹±æ–‡ | conll2003, wikiann, conll2012_ontonotesv5 | BERTè‹±æ–‡è®­ç»ƒ |
| `run_bert_zh.sh` | BERT | ä¸­æ–‡ | wikiann, conll2012_ontonotesv5 | BERTä¸­æ–‡è®­ç»ƒ |
| `run_lstm_en.sh` | LSTM-CRF | è‹±æ–‡ | conll2003, wikiann, conll2012_ontonotesv5 | LSTMè‹±æ–‡è®­ç»ƒ |
| `run_lstm_zh.sh` | LSTM-CRF | ä¸­æ–‡ | wikiann, conll2012_ontonotesv5 | LSTMä¸­æ–‡è®­ç»ƒ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. BERTè‹±æ–‡è®­ç»ƒ
```bash
bash shell_scripts/run_bert_en.sh
```
**è®­ç»ƒå†…å®¹ï¼š**
- conll2003 (è‹±æ–‡) - F1: 86.01%
- wikiann (è‹±æ–‡) - F1: 76.63%
- conll2012_ontonotesv5 (è‹±æ–‡) - F1: 82.18%

**å‚æ•°é…ç½®ï¼š**
- å­¦ä¹ ç‡: 4e-5
- æ‰¹é‡å¤§å°: 128
- è®­ç»ƒè½®æ•°: 10
- æƒé‡è¡°å‡: 0.01
- æœ€å¤§åºåˆ—é•¿åº¦: 128

### 2. BERTä¸­æ–‡è®­ç»ƒ
```bash
bash shell_scripts/run_bert_zh.sh
```
**è®­ç»ƒå†…å®¹ï¼š**
- wikiann (ä¸­æ–‡) - F1: 80.47%
- conll2012_ontonotesv5 (ä¸­æ–‡) - F1: 52.24%

**å‚æ•°é…ç½®ï¼š**
- å­¦ä¹ ç‡: 1e-4
- æ‰¹é‡å¤§å°: 16
- è®­ç»ƒè½®æ•°: 10
- æƒé‡è¡°å‡: 0.01
- æœ€å¤§åºåˆ—é•¿åº¦: 256

### 3. LSTMè‹±æ–‡è®­ç»ƒ
```bash
bash shell_scripts/run_lstm_en.sh
```
**è®­ç»ƒå†…å®¹ï¼š**
- conll2003 (è‹±æ–‡) - F1: 73.00%
- wikiann (è‹±æ–‡) - F1: 61.23%
- conll2012_ontonotesv5 (è‹±æ–‡) - F1: 73.94%

**å‚æ•°é…ç½®ï¼š**
- å­¦ä¹ ç‡: 0.001
- æ‰¹é‡å¤§å°: 256
- è®­ç»ƒè½®æ•°: 30
- åµŒå…¥ç»´åº¦: 100
- éšè—ç»´åº¦: 256
- æœ€å¤§åºåˆ—é•¿åº¦: 128

### 4. LSTMä¸­æ–‡è®­ç»ƒ
```bash
bash shell_scripts/run_lstm_zh.sh
```
**è®­ç»ƒå†…å®¹ï¼š**
- wikiann (ä¸­æ–‡) - F1: 68.66%
- conll2012_ontonotesv5 (ä¸­æ–‡) - F1: 60.38%

**å‚æ•°é…ç½®ï¼š**
- å­¦ä¹ ç‡: 0.001
- æ‰¹é‡å¤§å°: 256
- è®­ç»ƒè½®æ•°: 30
- åµŒå…¥ç»´åº¦: 100
- éšè—ç»´åº¦: 256
- æœ€å¤§åºåˆ—é•¿åº¦: 128

## ğŸ“Š æ—¥å¿—æ–‡ä»¶å‘½åè§„åˆ™

### BERTæ¨¡å‹
- è‹±æ–‡conll2003: `bert_conll2003_bert-base-cased.log`
- è‹±æ–‡wikiann: `bert_wikiann_en_bert-base-cased.log`
- è‹±æ–‡conll2012: `bert_conll2012_ontonotesv5_bert-base-cased.log`
- ä¸­æ–‡wikiann: `bert_wikiann_zh_bert-base-chinese.log`
- ä¸­æ–‡conll2012: `bert_conll2012_ontonotesv5_bert-base-chinese.log`

### LSTM-CRFæ¨¡å‹
- è‹±æ–‡conll2003: `lstm-crf_conll2003_bert-base-cased.log`
- è‹±æ–‡wikiann: `lstm-crf_wikiann_en_bert-base-cased.log`
- è‹±æ–‡conll2012: `lstm-crf_conll2012_ontonotesv5_bert-base-cased.log`
- ä¸­æ–‡wikiann: `lstm-crf_wikiann_zh_bert-base-chinese.log`
- ä¸­æ–‡conll2012: `lstm-crf_conll2012_ontonotesv5_bert-base-chinese.log`

## ğŸ”§ ç¯å¢ƒé…ç½®

æ‰€æœ‰è„šæœ¬éƒ½åŒ…å«ä»¥ä¸‹ç¯å¢ƒé…ç½®ï¼š
```bash
export CUDA_VISIBLE_DEVICES=0
export HF_HOME=$HOME/.cache/huggingface
export HF_DATASETS_CACHE=$HOME/.cache/huggingface/datasets
export HF_MODULES_CACHE=$HOME/.cache/huggingface/modules
```

## ğŸ“ˆ å®éªŒç»“æœæ€»ç»“

### è‹±æ–‡æ•°æ®é›†è¡¨ç°
| æ•°æ®é›† | BERT F1 | LSTM-CRF F1 | ä¼˜åŠ¿æ¨¡å‹ |
|--------|---------|-------------|----------|
| CoNLL-2003 | 86.01% | 73.00% | BERT (+13.01%) |
| WikiAnn | 76.63% | 61.23% | BERT (+15.40%) |
| CoNLL-2012 | 82.18% | 73.94% | BERT (+8.24%) |

### ä¸­æ–‡æ•°æ®é›†è¡¨ç°
| æ•°æ®é›† | BERT F1 | LSTM-CRF F1 | ä¼˜åŠ¿æ¨¡å‹ |
|--------|---------|-------------|----------|
| WikiAnn | 80.47% | 68.66% | BERT (+11.81%) |
| CoNLL-2012 | 52.24% | 60.38% | LSTM-CRF (+8.14%) |

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®é›†é™åˆ¶**: 
   - ä¸­æ–‡ä¸æ”¯æŒconll2003æ•°æ®é›†
   - conll2012_ontonotesv5ä¸­æ–‡æ•°æ®é›†è´¨é‡å¯èƒ½å­˜åœ¨é—®é¢˜

2. **åˆ†è¯æ–¹å¼**: 
   - è‹±æ–‡ä½¿ç”¨ç©ºæ ¼åˆ†è¯
   - ä¸­æ–‡ä½¿ç”¨jiebaåˆ†è¯

3. **æ¨¡å‹å·®å¼‚**:
   - BERTä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼Œè®­ç»ƒè½®æ•°è¾ƒå°‘ï¼ˆ10è½®ï¼‰
   - LSTM-CRFä»å¤´è®­ç»ƒï¼Œè®­ç»ƒè½®æ•°è¾ƒå¤šï¼ˆ30è½®ï¼‰
   - BERTåœ¨è‹±æ–‡ä»»åŠ¡ä¸Šè¡¨ç°æ˜¾è‘—ä¼˜äºLSTM-CRF
   - ä¸­æ–‡CoNLL-2012æ•°æ®é›†ä¸ŠLSTM-CRFè¡¨ç°æ›´å¥½

4. **æ‰¹é‡å¤§å°**: 
   - BERTä½¿ç”¨è¾ƒå°æ‰¹é‡ï¼ˆ16-128ï¼‰ï¼Œé¿å…å†…å­˜ä¸è¶³
   - LSTMä½¿ç”¨è¾ƒå¤§æ‰¹é‡ï¼ˆ256ï¼‰ï¼Œæé«˜è®­ç»ƒæ•ˆç‡

5. **æ—¥å¿—æ–‡ä»¶**: 
   - æ‰€æœ‰æ—¥å¿—æ–‡ä»¶éƒ½ä¿å­˜åœ¨`./logs`ç›®å½•
   - æŒ‰æ¨¡å‹ç±»å‹å’Œè¯­è¨€åˆ†ç±»å­˜å‚¨

## ğŸ¯ æ¨èä½¿ç”¨åœºæ™¯

- **å¿«é€Ÿå®éªŒ**: ä½¿ç”¨BERTè„šæœ¬ï¼Œè®­ç»ƒé€Ÿåº¦å¿«ï¼Œè‹±æ–‡ä»»åŠ¡è¡¨ç°ä¼˜å¼‚
- **æ·±å…¥ç ”ç©¶**: ä½¿ç”¨LSTMè„šæœ¬ï¼Œå¯ä»¥æ›´å¥½åœ°ç†è§£æ¨¡å‹è¡Œä¸º
- **è‹±æ–‡ä»»åŠ¡**: ä¼˜å…ˆä½¿ç”¨è‹±æ–‡è„šæœ¬ï¼Œæ•°æ®é›†æ›´ä¸°å¯Œï¼Œæ€§èƒ½æ›´å¥½
- **ä¸­æ–‡ä»»åŠ¡**: ä½¿ç”¨ä¸­æ–‡è„šæœ¬ï¼Œä¸“é—¨é’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–ï¼Œä½†éœ€æ³¨æ„æ•°æ®é›†è´¨é‡

## ğŸ” ç›‘æ§è®­ç»ƒ

è®­ç»ƒè¿‡ç¨‹ä¸­å¯ä»¥æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š
```bash
# å®æ—¶æŸ¥çœ‹è®­ç»ƒæ—¥å¿—
tail -f logs/bert_en/bert_conll2003_bert-base-cased.log

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
ls -la logs/bert_en/
ls -la logs/bert_zh/
ls -la logs/lstm_en/
ls -la logs/lstm_zh/

# ç”Ÿæˆè®­ç»ƒæ›²çº¿å›¾
python scripts/plot_logs.py
```

